<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    @import url("https://fonts.googleapis.com/css2?family=Sansita+Swashed:wght@600&display=swap");
    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(45deg, rgb(255, 248, 47), rgb(229, 106, 18));
      font-family: "Sansita Swashed", cursive;
    }
    body:hover{
        background: linear-gradient(45deg, rgb(255, 248, 47), rgb(229, 106, 18));
    }
    .center {
      position: relative;
      padding: 50px 50px;
      background: rgba(255, 238, 4, 0.397);
      border-radius: 10px;
    }
    .center:hover {
      background: linear-gradient(45deg, rgb(255, 248, 47), rgb(229, 106, 18));
    }
    .center h1 {
      font-size: 2em;
      border-left: 5px solid dodgerblue;
      padding: 10px;
      color: #000;
      letter-spacing: 5px;
      margin-bottom: 60px;
      font-weight: bold;
      padding-left: 10px;
    }
    .center .inputbox {
      position: relative;
      width: 300px;
      height: 50px;
      margin-bottom: 50px;
    }
    .center .inputbox input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      border: 2px solid #000;
      outline: none;
      background: none;
      padding: 10px;
      border-radius: 10px;
      font-size: 1.2em;
    }
    .center .inputbox:last-child {
      margin-bottom: 0;
    }
    .center .inputbox span {
      position: absolute;
      top: 14px;
      left: 20px;
      font-size: 1em;
      transition: 0.6s;
      font-family: sans-serif;
    }
    .center .inputbox input:focus ~ span,
    .center .inputbox input:valid ~ span {
      transform: translateX(-13px) translateY(-35px);
      font-size: 1em;
    }
    .center .inputbox [type="button"] {
      width: 200px;
      height: 80px;
      background: rgb(229, 106, 18);
      color: #fff;
      border: #fff;
      border-radius: 15px;
    }
    .center .inputbox1 [type="button"] {
      width: 100px;
      height: 40px;
      background: rgb(255, 121, 25);
      color: #fff;
      border: #fff;
      border-radius: 15px;
    }
    .center .inputbox1:hover [type="button"] {
      background: linear-gradient(45deg, rgb(255, 248, 47), rgb(229, 106, 18));
    }
    .center .inputbox:hover [type="button"] {
      background: linear-gradient(45deg, rgb(255, 248, 47), rgb(229, 106, 18));
    }
</style>
</head>

<body>


<div class="center">
    <h1>Register</h1>
        <p>Please fill in this form to create an account.</p>
        <form>

        
        <div class="inputbox">
        <input type="text" placeholder="Enter Email" name="email" id="email" required>
        
        </div>

        <div class="inputbox">
        <input type="password" placeholder="Password" name="psw" id="psw" required>
        
        
        </div>
        <div class="inputbox">
            <input type="checkbox" onclick="myFunction()">Show Password
        </div>

        <hr>
        <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
        
        <div class="inputbox">
        <button type="button" id="submitData" name="submitData" class="registerbtn">Register</button>
        </div>

    <div class="inputbox1">
        <p>Already have an account? </p>
        <button type="button" id="signinData" name="siginData" class="registerbtn">Sign In</button>
    </div>
</form>
</div>


<script>
    function myFunction() {
      var x = document.getElementById("psw");
      if (x.type === "password") {
        x.type = "text";
      } else {
        x.type = "password";
      }
    }
    </script>

</body>
</html>

<script type="module">
    // Import the functions you need from the SDKs you need
    import {initializeApp} from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
    import {getDatabase, set, ref, update} from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";


    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
        
    apiKey: "AIzaSyDkEI6zrDInTLoKvXlY6KB5Ub_9e0_vcHY",
    authDomain: "madasi123.firebaseapp.com",
    databaseURL: "https://madasi123-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "madasi123",
    storageBucket: "madasi123.appspot.com",
    messagingSenderId: "632160284592",
    appId: "1:632160284592:web:76b3b571c0edb7d4daf075",
    measurementId: "G-CDF9Y3J8P1"
    
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase(app);

    submitData.addEventListener('click', (e) => {

        var email = document.getElementById('email').value;
        var password = document.getElementById('psw').value;

        //sign up user
        createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed in
                const user = userCredential.user;
                // ... user.uid
                set(ref(database, 'users/' + user.uid), {
                    email: email,
                    password: password
                })
                    .then(() => {
                        // Data saved successfully!
                        alert('user created successfully');
                        window.location.href = "paginaScelte.html";
        
                    })
                    .catch((error) => {
                        // The write failed...
                        alert(error);
                    });
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                // ..
                alert(errorMessage);
            });
        });

        // log in user
    signinData.addEventListener('click', (e) => {

            var email = document.getElementById('email').value;
            var password = document.getElementById('psw').value;


            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                // Signed in
                
                    const user = userCredential.user;
                    
                // ...

                // save log in details into real time database
                    var lgDate = new Date();
                    update(ref(database, 'users/' + user.uid), {
                        last_login: lgDate,
                    })
                        .then(() => {
                        // Data saved successfully!
                            alert('user logged in successfully');
                            window.location.href = "paginaScelte.html";

                        })
                        .catch((error) => {
                        // The write failed...
                            alert(error);
                        });
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                alert(errorMessage);
            });
        }); 

        // sign out user
       // signOut(auth).then(() => {
               // Sign-out successful.
       // }).catch((error) => {
            // An error happened.
      //  });
    

</script>

